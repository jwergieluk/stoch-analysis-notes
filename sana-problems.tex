\section{Measurability of stochastic processes}

\problem{Progressive measurability. Stopping times.} Let $X$ be a progressively
measurable process and $T$ a stopping time on a filtered probability space
$(\Omega, \cA, \bF, P)$. Then the following holds:
\begin{enumerate}
    \item $X_T$ is $\cF_{T}$-measurable.
    \item The process $X^{T}$, defined by $X^{T}_{t} = X_{T \wedge t}$, is
        progressively measurable with respect to the filtration $\bF^{T} =
        (\cF_{T \wedge t})_{t\geq 0}$.
    \item $X^T$ is progressively measurable with respect to the filtration $\bF$.
\end{enumerate}

\solution
\begin{enumerate}
    \item 
    \item $\bF^{T}$ is a filtration $(T \wedge t)_{t\leq 0}$ is an increasing 
        family of stopping times.
    \item 
\end{enumerate}

\problem{Filtrations and continuity of paths.} Let $X$ be a stochastic process
on a probability space $(\Omega, \cA, P)$ and $\cF^{X}=(\cF^{X}_{t})_{t\geq 0}$
be the natural filtration of $X$. Moreover, $A$ is the event that $X$ is
continuous on $[0, t_0)$. Then following holds:
\begin{enumerate}
    \item If $X$ has c\`adl\`ag paths, i.e. every path of $X$ is a c\`adl\`ag
        function, then $A\in \cF^{X}_{t_0}$. 

    \item If $X$ is c\`adl\`ag, i.e. $X$ has c\`adl\`ag paths a.s., then $A$
        may fail to be in $\cF^{X}_{t_0}$.

    \item If $X$ is c\`adl\`ag, and $(\cF_{t})_{t\geq 0}$ is a filtration
        containing $\cF^{X}$ such that $\cF_{0}$ contains all $P$-null events
        in $\cA$, then $A\in \cF_{t_0}$.

    \item If $X$ has c\`agl\`ad paths and is adapted to a right-continuous
        filtration $(\cF_{t})_{t\geq 0}$, then $A\in \cF_{t_{0}}$. 
\end{enumerate}


\section{Stopping times}

\problem{Stopping times. Arithmetic.} Assume that the stochastic basis
$(\Omega, \cA, \bF, P)$ satisfies the usual conditions, and $T$, $S$, and $S_n,
n\in\bN$ are stopping times. Then the following holds.
\begin{enumerate}
    \item $T + t_0$ for $t_0\geq 0$ is a stopping time.
    \item $T+S$ is a stopping time.
    \item A fixed time $U \equiv t_0>0$ is a stopping time and we have $\cF_U = \cF_{t_0}$.
    \item $\bigvee_{n\in\bN} S_n$ and $\bigwedge_{n\in\bN} S_n$ are stopping times. 
\end{enumerate}

\solution
\begin{enumerate}
\item $\left\{ T+t_{0}\leq t \right\} = \left\{ T\leq t-t_{0} \right\} \in
    \cF_{(t-t_0)^{+}} \subset \cF_{t}$ for all $t\geq 0$.
\item $\left\{ T+S > t \right\} = \left\{ T=0, S>t \right\} \cup \left\{ T=t,
    S>0 \right\} \cup \left\{ T>t \right\} \cup \bigcup_{r\in(0,t)\cap \bQ}
    \left\{ T\leq r , S> t-r \right\}$, which is a countable union of sets from
    $\cF_{t}$. 
\item $\left\{ U \leq t \right\} = \left\{ t_{0} \leq t \right\} \in \left\{
    \emptyset, \Omega \right\} \subset \cF_{t}$ for all $t\geq 0$. 
    $\cF_U = \left\{ A\in\cA : A \cap \left\{ t_0 \leq t \right\}\in\cF_t \
    \forall t\geq 0 \right\} = \left\{ A\in\cA : A\in\cF_t \ \forall t\geq t_0
    \right\} = \cF_{t_0}$.
\item $\left\{ \min_{n\in\bN} S_{n} \leq t \right\} = \bigcap_{n\in\bN} \left\{
        S_{n}\leq t \right\}$. $\left\{ \max_{n\in\bN} S_n > t \right\} =
        \bigcap_{n\in\bN} \left\{ S_{n} > t \right\}$.
\end{enumerate}

\problem{Stopping time $\sigma$-algebras.} Let $T$ be a stopping time on a
stochastic basis $(\Omega, \cA, \bF, P)$.
\begin{enumerate}
    \item $\cF_T$ is a $\sigma$-algebra.
    \item $\cF_{T-} \subset \cF_{T}$.
    \item $T$ is $\cF_{T-}$-measurable.
\end{enumerate}

\solution 
\begin{enumerate}
    \item $\emptyset \in \cF_{T}$ and $\left\{ T\leq t \right\} \cap A_{i} \in
        \cF_{t}$ for all $t\geq 0$ implies $\left\{ T\leq t \right\} \cap
        \bigcup_{n\in\bN} A_i \in \cF_t$ and $\bigcup_{n\in\bN} A_i \in
        \cF_{T}$. $\left\{ T \leq t \right\} \cap A \in\cF_t$ implies
        $\overline{ \left\{ T\leq t \right\} \cap A } \cap \left\{ T\leq t
        \right\} = \bar A \cap \left\{ T\leq t \right\} \in \cF_{t}$.
    \item Consider a family of sets $A_{s}\in\cF_{s}$, $s\geq 0$. For any
        $t\geq 0$ we have $A_{0} \cap \left\{ {T\leq t} \right\} \in\cF_{t}$,
        and $A_s \cap \left\{ s<T \right\} \cap \left\{ T\leq t \right\} =
        \emptyset \in\cF_{t}$ if $s\geq t$, and $\overline{ \left\{ s<T
        \right\} } = \left\{ T\leq s \right\} \in \cF_{t}$ for $s<t$ and hence
        $A_s \cap \left\{ s<T \right\} \cap \left\{ T\leq t \right\}
        \in\cF_{t}$. Since the generators of $\cF_{T-}$ are in $\cF_{T}$, so is
        $\cF_{T-}$.
    \item $T : (\Omega, \cF_{T-}) \to ( [0,\infty], \cB([0,\infty]) )$ is a
        measurable function.
\end{enumerate}

\problem{Stopping times and the continuity of filtrations.}
Consider a filtered probability space $(\Omega, \cA, \bF, P)$ with $\Omega =
[0, \infty)$ and $\cF_t = \cB([0,t]) \cup \left\{ (t,\infty), [0, \infty)
\right\}$ for every $t\geq 0$. We define a random time $T:\Omega\to[0,\infty),
\omega \mapsto \omega$.  Then the following holds
\begin{enumerate}
    \item $\cF_{t} = \cF_{t-} = \cF_{t+}$ for all $t\geq 0$.
    \item $\cF_{T-} \neq \cF_{T}$.
\end{enumerate}
Is $T$ a stopping time?

\problem{Stopping times. A construction.}
On a stochastic basis $(\Omega, \cA, \bF, P)$ define a stopping time $T$ and a
real random variable $Z$. If $T \leq Z$ and $Z$ is $\cF_{T}$ measurable, then
$Z$ is a stopping time.

\solution 
Consider the disjoint union $\left\{ T\leq t \right\} = \left\{ Z \leq t
\right\} \cup \left\{ \left\{ T\leq t \right\}\cap \left\{ Z>t \right\}
\right\}$. $Z\in\cF_{T}$ implies $\left\{ \left\{ T\leq t \right\}\cap \left\{
Z>t \right\} \right\} \in \cF_{t}$, and therefore $\left\{ Z \leq t \right\}
\in \cF_{t}$.

\problem{Stopping times and optional times.} Let $(\Omega, \cA,
\bF, P)$ be a filtered probability space. A random time $T$ satisfying
$\{T<t\}\in\cF_{t}$ for all $t\geq 0$ is called an optional time. Prove the
following statements.
\begin{enumerate}
    \item Assume that $\bF$ is right-continuous. $T$ is a stopping time, iff it
        is an optional time.
    \item Show that the right-continuity of $\bF$ is essential for the above
        property to hold: Construct an optional time which is not a stopping
        time.
\end{enumerate}

\solution 
\begin{enumerate}
    \item Let $T$ be an optional time. The right-continuity of $\bF$ yields
        $\left\{ T\leq t \right\} = \bigcap_{\varepsilon>0, \varepsilon\in\bQ}
        \left\{ T<t+\varepsilon \right\} \in \cF_{t}$. Conversely, if $T$ is a
        stopping time, then $\left\{ T<t \right\} =
        \bigcup_{\varepsilon>0,\varepsilon\in\bQ} \left\{ T \leq t-\varepsilon
        \right\}\in \cF_t$, since $\cF$ is an increasing sequence. Note that the
        right-continuity is not needed to prove this part of the equivalence. 
    \item Set $\Omega = \left\{ \omega_{1}, \omega_{2} \right\}, \cA =
        2^{\Omega}$, and $\bF$ to be the natural filtration of the process $X$
        with $X_t(\omega) = \ind_{ \left\{ t>1, \omega= \omega_{2} \right\} }$.
        We have $\cF_{t} = \left\{ \emptyset, \Omega \right\}$ for all $t\leq
        1$, and $\cF_{t} = \cA$ for $t>1$, so $\bF$ is not right-continuous.
        Now, set $T(\omega_{1}) = \infty$ and $T(\omega_{2}) = 1$, that is, $T$
        is the hitting time of the set $\left\{ 1 \right\}$ by $X$. $\left\{ T
        < t \right\} = \emptyset$ for $t\leq 1$ and $\left\{ T < t  \right\} =
        \left\{ \omega_{2} \right\} \in \cF_{t}$ for $t>1$, hence $T$ is an
        optional time.  But $T$ is not a stopping time since $\left\{ {T\leq 1}
    \right\} = \left\{ \omega_{2} \right\} \nin \cF_{1}$. Remark: $X$ is an
    example of a Markov process not possessing the Feller property. 
\end{enumerate}


\problem{Stopping times. A counterexample.} Give an example of stopping times $S$
and $T$, with $S\leq T$ for which $T-S$ is not a stopping time. 

\solution
\begin{enumerate}
    \item A cheap solution: $T=S\equiv\infty$. $S\leq T$ but $T-S$ is not a stopping
        time because it is not well-defined.

    \item Let $B_1, B_2,\dots $ be independent Bernoulli random variables and
        $X$ a c\`adl\`ag process defined by $X_t = B_1 + \dots + B_{\lfloor t
        \rfloor}$.  We assume that $\Omega$ consists of all $0-1$ sequences
        indexed by $\bN$ and $\bF$ is the natural filtration of $X$. Moreover,
        let $T_n$ be the hitting time of level $n$ by $X$, i.e. $T_n = \inf
        \left\{ t\geq 0 : X_t = n  \right\}$. $T_n$ is a stopping time with
        $T_n < T_{n+1}$. Now, $\cF_{1} = \left\{ \left\{ (0\cdots) \right\},
        \left\{ (1\cdots) \right\} \right\}$, but $\left\{ T_2 - T_1 \leq 1
        \right\} = \left\{ T_2 = T_1 + 1 \right\} = \left\{ (11\cdots),
            (011\cdots), (0011\cdots), \cdots \right\}$ which is not in $\cF_1$. 
        Hence, $T_2 - T_1$ is not a stopping time. 
\end{enumerate}

\problem{Sequences of stopping times.} 
$(T_n)_{n\in\bN}$ is a sequence of stopping times decreasing to a random time
$T$. Show that $T$ is a stopping time, and that $\cF_{T} = \bigcap_{n\in\bN}
\cF_{T_n}$. 

\solution 
Since $T(\omega) = \lim_{n\in\bN} T_{n}(\omega)$, $T_{n}(\omega) \geq
T_{n-1}(\omega)$ for all $n\in\bN$, we get $\left\{ T>t \right\} =
\bigcap_{n\in\bN} \left\{ T_{n}>t \right\} \in \cF_{t}$, and the stopping time
property of $T$. Moreover, 
\begin{align*}
    \bigcap_{n\in\bN} \bF_{T_{n}} &= \left\{ A\in\cA : \left\{ T_n\leq t \right\}\cap A \in \cF_{t} \ \forall t\geq 0,\forall n\in\bN \right\} \\
    &= \left\{ A \in \cA : \left\{ T_{n}>t \right\}\cup \bar A \in\cF_{t} \ \forall t,n \right\} \\
    &\subset \left\{A\in\cA :\bigcap_{n\in\bN} \left\{T_{n}>t\right\} \cup \bar A\in\cF_t \ \forall t \right\}
    = \cF_{T}.
\end{align*}
$T$ is a stopping time, and $T\leq T_n$ implies $\cF_{T} \subset \cF_{T_{n}}$.
This proves the equality.

\problem{Stopping time $\sigma$-algebras. Monotonicity.} Let $S, T$ be
stopping times with $S\leq T$, then $\cF_{S} \subseteq \cF_{T}$.

\solution
We work with a filtered probability space $(\Omega,\cA, \bF, P)$.
$S\leq T$ implies $\left\{ S\leq t \right\} \supseteq \left\{ T\leq t
\right\}$.  And therefore, for an $A\in \cA$, $A \cap \left\{ S\leq t
\right\}\in\cF_{t}$ implies $A \cap \left\{ T\leq t \right\} = A\cap \left\{
S\leq t \right\}\cap \left\{ T\leq t \right\}\in\cF_{t}$.

\problem{Stopping time $\sigma$-algebras. Questions.} 
Let $T$ be a stopping time on a filtered probability space $(\Omega,\cA, \bF,
P)$.  $\cF_{T-}$ is generated by $\cF_0$ and the sets $A_{t} \cap \left\{ {t>T}
\right\}$ with $A_t \in \cF_t$.  Define $\cF_{T\sim} = \left\{ A \in \cA : A
\cap \left\{ T <t \right\} \in\cF_{t} \ \forall t\geq 0 \right\}$. 
\begin{enumerate}
    \item Are $\cF_{T-}$ and $\cF_{T\sim}$ equal?
\end{enumerate}


\problem{Stopping times. Egoroff's problem.}
Let $ X $ be a stochastic process and $ T $ a stopping time of $\{ \mathcal{F}_t^X \}$, where 
$\mathcal{F}_t^X := \sigma (X_s, 0 \leq s \leq t)$.
Suppose that for any $\omega, \omega' \in \Omega $, we have $X_t(\omega) = X_t(\omega')$,
for all $t \in [0, T(\omega)] \cap [0, \infty)$.
Show that $T(\omega) = T(\omega')$.
% http://math.stackexchange.com/questions/84271/a-question-about-stochastic-processes-and-stopping-times 


\problem{Measurable process stopped at a random time.}
Let $(\Omega, \cA, P)$ be a probability space and $X$ a measurable process.  We
define a random time as a measurable function $(\Omega, \cA)\to ([0,\infty], \cB([0,\infty]))$
\begin{enumerate}
    \item If $T$ is finite, then $X_T$ is a random variable. 
    \item $\left\{\left\{ X_T \in A \right\}, \left\{ X_T \in A \right\}\cup \left\{ T=\infty \right\} : A\in\cA \right\}$
        is a sub-$\sigma$-algebra of $\cA$. 
\end{enumerate}
% \cite{Karatzas1991}

\problem{Sum of optional times.} Let $S$ and $T$ be optional times on a filtered probability
space $\left( \Omega, \cA, P \right)$. Then
\begin{enumerate}
    \item $S+T$ is an optional time.
    \item $S+T$ is a stopping time if $T>0$, $S>0$, or, if $T>0$, and $T$ is a
        stopping time. 
\end{enumerate} % \cite{Karatzas1991}

\problem{Optional times. Approximation by stopping times.} Let $T$ be an
optional time on a filtered probability space $(\Omega, \cA, \bF, P)$, and
$\left( T_n \right)_{n\geq 1}$ a sequence of random times with $T_n(\omega) =
\sum_{k\geq 1} \frac{k}{2^n} \ind_{ [ \frac{k-1}{2^n}, \frac{k}{2^n} ) }(\omega)$ for
$\omega$ with $T(\omega)<\infty$, and $T_n=T$ on $\left\{ \omega : T(\omega)=\infty \right\}$.
Show that
\begin{enumerate}
    \item $T_n$ are stopping times with $\lim T_n = T$. 
    \item For an $A\in \cF_{T+}$ we have $A \cap \left\{ T_n = \frac{k}{2^n} \right\} \in \cF_{\frac{k}{2^n}}$,
        for every $k\geq 1$, $n\in\bN$.
\end{enumerate}


\problem{Hitting time of an open set.}  Let $(\Omega, \cA, \bF, P)$ be a
filtered probability space, and $X$ an adapted c\`adl\`ag process with values
in $\bR^{n}$. The hitting time $T_B$ of a Borel set $B\in\cB(\bR^{n})$ by $X$
is defined as
\begin{align*}
    T_B(\omega) = \operatorname{inf} \left\{ t \geq 0 : X_t(\omega) \in B \right\}.
\end{align*}
Let $O$ be an open set in $\bR^{n}$. Show that
\begin{enumerate}
    \item $T_O$ is a stopping time. 
    \item $T_O$ is an optional time. 
\end{enumerate}


\problem{Hitting time of a closed set.} Let $X$ be an adapted c\`adl\`ag process on a
stochastic basis $(\Omega, \cA, \bF, P)$, and $C$ be a closed set. Then the hitting
time $T_C$ of $C$ is a stopping time. 

\problem{Stopping times. Galmarino's test.} Let $(\Omega, \cA, \bF, P)$ be a
filtered probability space with the filtration $\bF$ generated by a continuous
real-valued stochastic process $X$. Then a random time $T$ is a stopping time
if and only if, for every $\omega, \omega' \in \Omega$ $T(\omega)=t$, and
$X_{s}(\omega) = X_s(\omega')$ for all $s\leq t$ implies $T(\omega') = t$. 


\section{Local martingales. }

\problem{Bounded local martingales are true martingales.} A local martingale
with a.s.\ bounded paths is a martingale.

\problem{Continuous processes are locally bounded.} Let $X$ be an adapted process with
continuous paths. Show that $X$ is locally bounded.

\problem{Martingales and completion of the stochastic basis.} Let $X$ be a
submartingale on a completed stochastic basis $(\Omega, \cA^{P}, \bF^{P}, P)$. Then
there exists a process $X^{'}$, $P$ indistinguishable from $X$, adapted to the
(uncompleted) filtration $\bF$, and also an $\bF$ stopping time $T$, such that
for all $\omega$ the path $X_{.}(\omega)$ is c\`ad everywhere and l\`ad
everywhere except at $T(\omega)$, and moreover $P(T<\infty)=0$. 

\problem{Uniformly integrable martingales. A counterexample.} Give an example
of a martingale $X$ and a stopping time $T$, such that $E X_{T} \neq E X_{0}$. 


